{% load static %} {% load i18n %} {% load myTemplateTags %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="{% static 'web/img/websiteIcon.ico' %}"
    />
    <link rel="stylesheet" href="{% static 'web/css/bootstrap.min.css' %}" />
    <style>
      .iconConfig {
        fill: currentColor;
        vertical-align: -0.125em;
      }
    </style>
    {% block title %} {% endblock %} {% block css %} {% endblock %}
  </head>
  <body>
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
      <symbol id="chevronRight" viewBox="0 0 512 512">
        <style>svg{fill:#198654}</style>
        <path d="M0 256a256 256 0 1 0 512 0A256 256 0 1 0 0 256zM241 377c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l87-87-87-87c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0L345 239c9.4 9.4 9.4 24.6 0 33.9L241 377z"/>
      </symbol>
      <symbol id="bilibili" viewBox="0 0 512 512">
        <path
          d="M488.6 104.1C505.3 122.2 513 143.8 511.9 169.8V372.2C511.5 398.6 502.7 420.3 485.4 437.3C468.2 454.3 446.3 463.2 419.9 464H92.02C65.57 463.2 43.81 454.2 26.74 436.8C9.682 419.4 .7667 396.5 0 368.2V169.8C.7667 143.8 9.682 122.2 26.74 104.1C43.81 87.75 65.57 78.77 92.02 78H121.4L96.05 52.19C90.3 46.46 87.42 39.19 87.42 30.4C87.42 21.6 90.3 14.34 96.05 8.603C101.8 2.868 109.1 0 117.9 0C126.7 0 134 2.868 139.8 8.603L213.1 78H301.1L375.6 8.603C381.7 2.868 389.2 0 398 0C406.8 0 414.1 2.868 419.9 8.603C425.6 14.34 428.5 21.6 428.5 30.4C428.5 39.19 425.6 46.46 419.9 52.19L394.6 78L423.9 78C450.3 78.77 471.9 87.75 488.6 104.1H488.6zM449.8 173.8C449.4 164.2 446.1 156.4 439.1 150.3C433.9 144.2 425.1 140.9 416.4 140.5H96.05C86.46 140.9 78.6 144.2 72.47 150.3C66.33 156.4 63.07 164.2 62.69 173.8V368.2C62.69 377.4 65.95 385.2 72.47 391.7C78.99 398.2 86.85 401.5 96.05 401.5H416.4C425.6 401.5 433.4 398.2 439.7 391.7C446 385.2 449.4 377.4 449.8 368.2L449.8 173.8zM185.5 216.5C191.8 222.8 195.2 230.6 195.6 239.7V273C195.2 282.2 191.9 289.9 185.8 296.2C179.6 302.5 171.8 305.7 162.2 305.7C152.6 305.7 144.7 302.5 138.6 296.2C132.5 289.9 129.2 282.2 128.8 273V239.7C129.2 230.6 132.6 222.8 138.9 216.5C145.2 210.2 152.1 206.9 162.2 206.5C171.4 206.9 179.2 210.2 185.5 216.5H185.5zM377 216.5C383.3 222.8 386.7 230.6 387.1 239.7V273C386.7 282.2 383.4 289.9 377.3 296.2C371.2 302.5 363.3 305.7 353.7 305.7C344.1 305.7 336.3 302.5 330.1 296.2C323.1 289.9 320.7 282.2 320.4 273V239.7C320.7 230.6 324.1 222.8 330.4 216.5C336.7 210.2 344.5 206.9 353.7 206.5C362.9 206.9 370.7 210.2 377 216.5H377z"
        />
      </symbol>
      <symbol
        t="1691772692548"
        viewBox="0 0 1024 1024"
        p-id="6763"
        id="websiteIcon"
      >
        <path
          d="M896 195.8V96a32 32 0 0 0-32-32H160a32 32 0 0 0-32 32v256a32 32 0 0 0 32 32h229.39L148.33 759A127.75 127.75 0 0 0 128 828.2V928a32 32 0 0 0 32 32h704a32 32 0 0 0 32-32V672a32 32 0 0 0-32-32H634.61l241.06-375A127.75 127.75 0 0 0 896 195.8zM832 128v64H192v-64zM192 896v-67.8a63.78 63.78 0 0 1 10.17-34.61L465.47 384h83.92L293.08 782.7A32 32 0 0 0 320 832h512v64z m640-128H378.61l41.15-64H832zM460.9 640l174-270.7A32 32 0 0 0 608 320H192v-64h613.39L558.53 640z"
          fill="#0b2239"
          p-id="6764"
        ></path>
      </symbol>
      <symbol id="home" viewBox="0 0 576 512">
        <path
          d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c.2 35.5-28.5 64.3-64 64.3H128.1c-35.3 0-64-28.7-64-64V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L416 100.7V64c0-17.7 14.3-32 32-32h32c17.7 0 32 14.3 32 32V185l52.8 46.4c8 7 12 15 11 24zM248 192c-13.3 0-24 10.7-24 24v80c0 13.3 10.7 24 24 24h80c13.3 0 24-10.7 24-24V216c0-13.3-10.7-24-24-24H248z"
        />
      </symbol>
      <symbol id="archieve" viewBox="0 0 512 512">
        <path
          d="M32 32H480c17.7 0 32 14.3 32 32V96c0 17.7-14.3 32-32 32H32C14.3 128 0 113.7 0 96V64C0 46.3 14.3 32 32 32zm0 128H480V416c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V160zm128 80c0 8.8 7.2 16 16 16H336c8.8 0 16-7.2 16-16s-7.2-16-16-16H176c-8.8 0-16 7.2-16 16z"
        />
      </symbol>
      <symbol id="book" viewBox="0 0 448 512">
        <path
          d="M96 0C43 0 0 43 0 96V416c0 53 43 96 96 96H384h32c17.7 0 32-14.3 32-32s-14.3-32-32-32V384c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H384 96zm0 384H352v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16H336c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48H336c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"
        />
      </symbol>
      <symbol id="email" viewBox="0 0 512 512">
        <path
          d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"
        />
      </symbol>
    </svg>
    <div class="modal fade" id="contactMeModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5 mx-auto" id="exampleModalLabel">
              {% trans 'Contact Me' %}
            </h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="card text-center">
              <div class="card-header">
                <ul class="nav nav-tabs">
                  <li class="nav-item">
                    <button
                      class="nav-link active"
                      id="wechat"
                      data-bs-toggle="tab"
                      data-bs-target="#wechat-tab-pane"
                      type="button"
                    >
                      {% trans 'Wechat' %}
                    </button>
                  </li>
                  <li class="nav-item">
                    <button
                      class="nav-link"
                      id="email-tab"
                      data-bs-toggle="tab"
                      data-bs-target="#email-tab-pane"
                      type="button"
                    >
                      {% trans 'Email' %}
                    </button>
                  </li>
                  <li class="nav-item">
                    <button
                      class="nav-link"
                      id="bilibili"
                      data-bs-toggle="tab"
                      data-bs-target="#bilibili-tab-pane"
                      type="button"
                    >
                      {% trans 'Bilibili' %}
                    </button>
                  </li>
                </ul>
              </div>
              <div class="card-body">
                <div class="tab-content">
                  <div
                    class="tab-pane fade show active"
                    id="wechat-tab-pane"
                    tabindex="0"
                  >
                    <img
                      src="{% static 'web/img/myWechatQrcode.jpg' %}"
                      class="rounded img-thumbnail"
                    />
                    <button
                      type="button"
                      class="btn btn-outline-success w-100 mt-2"
                      data-bs-dismiss="modal"
                    >
                      {% trans 'Close' %}
                    </button>
                  </div>
                  <div class="tab-pane fade" id="email-tab-pane" tabindex="0">
                    <div
                      class="d-flex justify-content-between align-items-center"
                    >
                      <div class="form-floating">
                        <input
                          type="email"
                          id="id_email"
                          class="form-control"
                          value="liaozhimatters@gmail.com"
                          placeholder=" "
                          readonly
                        />
                        <label for="id_email">{% trans 'Email Me' %}</label>
                      </div>
                      <div>
                        <button
                          class="btn btn-outline-success rounded-pill"
                          type="button"
                          id="copyEmailTrigger"
                        >
                          {% trans 'Copy' %}
                        </button>
                      </div>
                    </div>
                    <button
                      type="button"
                      class="btn btn-outline-success w-100 mt-2"
                      data-bs-dismiss="modal"
                    >
                      {% trans 'Close' %}
                    </button>
                  </div>
                  <div
                    class="tab-pane fade"
                    id="bilibili-tab-pane"
                    tabindex="0"
                  >
                    <div class="card">
                      <img
                        src="{% static 'web/img/bilibiliProfile.jpg' %}"
                        class="card-img-start"
                      />
                      <div class="card-body">
                        <a target="_blank" href="https://space.bilibili.com/366570020" class="stretched-link text-decoration-none">
                          <div class="fs-4">
                            <svg class="iconConfig me-1" width="30px" height="30px">
                              <use xlink:href="#bilibili"></use>
                            </svg>{% trans 'Bilibili Profile' %}
                          </div>
                        </a>
                      </div>
                    </div>
                    <button
                      type="button"
                      class="btn btn-outline-success w-100 mt-2"
                      data-bs-dismiss="modal"
                    >
                      {% trans 'Close' %}
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="toast-container position-fixed end-0 top-0 p-3">
      <div id="copyStatusToast" class="toast">
        <div class="toast-header bg-warning-subtle">
          <strong class="me-auto">{% trans 'Copy Status' %}</strong>
          <small>{% trans 'just now' %}</small>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="toast"
            aria-label="Close"
          ></button>
        </div>
        <div class="toast-body">
          {% trans "You've copied my email address, go ahead and email me" %}
        </div>
      </div>
    </div>
    <nav class="navbar navbar-expand-md bg-body-tertiary sticky-top">
      <div class="container-fluid">
        <a class="navbar-brand" href="{% url 'web:landingpage' %}">
          <svg height="50px" width="50px">
            <use xlink:href="#websiteIcon"></use>
          </svg>
          ZhiLiao
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="offcanvas"
          data-bs-target="#offcanvasNavbar"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasNavbarLabel">ZhiLiao</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="offcanvas"
              aria-label="Close"
            ></button>
          </div>
          <div class="offcanvas-body">
            <ul class="navbar-nav justify-content-around pe-3 mx-auto">
              <li class="nav-item">
                <a class="nav-link" href="{% url 'web:landingpage' %}">
                  <svg class="iconConfig" width="25px" height="25px">
                    <use xlink:href="#home"></use>
                  </svg>
                  {% trans 'Landing Page' %}
                </a>
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  href="{% url 'web:bilibiliResourceDownload' %}"
                >
                  <svg class="iconConfig" width="25px" height="25px">
                    <use xlink:href="#archieve"></use>
                  </svg>
                  {% trans 'Bilibili Video Resouce' %}</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'web:bilibiliVideoDocs' %}">
                  <svg class="iconConfig" width="25px" height="25px">
                    <use xlink:href="#book"></use>
                  </svg>
                  {% trans 'Bilibili Video Docs' %}</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  href="#"
                  type="button"
                  data-bs-toggle="modal"
                  data-bs-target="#contactMeModal"
                >
                  <svg class="iconConfig" width="25px" height="25px">
                    <use xlink:href="#email"></use>
                  </svg>
                  {% trans 'Contact Me' %}
                </a>
              </li>
              <li class="nav-item">
                <div class="dropdown">
                  <button
                    class="btn dropdown-toggle px-1 py-0"
                    type="button"
                    data-bs-toggle="dropdown"
                    style="vertical-align: -0.5em"
                  >
                    <img
                      src="{% if request.LANGUAGE_CODE == 'zh' %}
                    	{% static 'web/img/china.png' %}
                    	{% elif request.LANGUAGE_CODE == 'en' %}
                    	{% static 'web/img/united-kingdom.png' %}
                    {% endif %}"
                      width="25px"
                      height="25px"
                    />
                  </button>
                  <ul class="dropdown-menu">
                    <li>
                      <a
                        class="dropdown-item changeLanguageTrigger {% if request.LANGUAGE_CODE == 'zh' %} acitive disabled {% endif %}"
                        href="#"
                        data-language-code="zh"
                      >
                        <img
                          src="{% static 'web/img/china.png' %}"
                          width="25px"
                          height="25px"
                        />中文
                      </a>
                    </li>
                    <li>
                      <a
                        class="dropdown-item changeLanguageTrigger {% if request.LANGUAGE_CODE == 'en' %} active disabled {% endif %}"
                        href="#"
                        data-language-code="en"
                      >
                        <img
                          src="{% static 'web/img/united-kingdom.png' %}"
                          width="25px"
                          height="25px"
                        />English
                      </a>
                    </li>
                  </ul>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </nav>
    {% notification request %} {% block content %} {% endblock %}
  </body>
  <script src="{% static 'web/js/jquery-3.6.4.min.js' %}"></script>
  <script src="{% static 'web/js/bootstrap.bundle.min.js' %}"></script>
  <script>
    function listenEmailCopy(){
        var copyStatusToast=$('#copyStatusToast')[0]
        var copyStatusToastBootstrap=bootstrap.Toast.getOrCreateInstance(copyStatusToast)
        $('#copyEmailTrigger').on('click',function (event){
            var triggerElem=$(event.target)
            triggerElem.prop('disabled',true)
            var emailInputElem=$('#id_email')
            emailInputElem[0].select()
            document.execCommand('copy')
            window.getSelection().removeAllRanges()
            triggerElem.prop('disabled',false)
            copyStatusToastBootstrap.show()
        })
    }
    function listenLanguageChange(){
        $('.changeLanguageTrigger').on('click',function (event) {
            var triggerElem=$(this)
            var languageCode=triggerElem.attr('data-language-code')
            $.ajax({
                'method':'get',
                'url':'{% url 'web:changeLanguage' %}'+'?languageCode='+languageCode,
                'dataType':'json',
                'success':function (response){
                    if(response['flag']){
                        location.reload()
                    }
                    else{
                        alert('{% trans 'Error:' %}'+response['message'])
                    }
                },
                'error':function (jqXHR,textCode,ThrownError){
                    if(jqXHR.textReponse){
                        alert('{% trans 'Error:' %}: '+jqXHR.textReponse+'('+textCode+')')
                    }
                    else{
                        alert('{% trans 'Error:' %}: '+ThrownError+'('+textCode+')')
                    }
                }

            })
        })
    }
    function lisetnCloseNotification(){
        $('#closeNotificationTrigger').on('click',function (event) {
            var closeTrigger=$(event.target)
            var notificationId=closeTrigger.attr('data-notificationId')
            $.ajax({
                'method':'get',
                'url':'{% url 'web:closeNotification' %}'+'?readNotificationId='+notificationId,
                'dataType':'json',
                'success':function (response) {
                    if(response['flag']){}
                    else{
                        alert('{% trans 'Error:' %}'+response['message'])
                    }
                },
                'error':function (jqXHR,textCode,ThrownError){
                    if(jqXHR.textReponse){
                        alert('{% trans 'Error:' %}: '+jqXHR.textReponse+'('+textCode+')')
                    }
                    else{
                        alert('{% trans 'Error:' %}: '+ThrownError+'('+textCode+')')
                    }
                }
            })
        })
    }
    $(()=>{
        listenEmailCopy()
        listenLanguageChange()
        lisetnCloseNotification()
    })
  </script>
  {% block js %} {% endblock %}
</html>
